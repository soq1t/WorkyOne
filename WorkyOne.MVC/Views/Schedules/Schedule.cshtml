@using WorkyOne.Contracts.DTOs.Abstractions
@using WorkyOne.Contracts.DTOs.Schedule.Common
@using WorkyOne.MVC.Models.Schedule

@model ScheduleDto
@{
    ViewData["Title"] = Model.Name;
}
<head>
    <link rel="stylesheet" href="~/css/Pages/Schedules/Schedule.css" asp-append-version="true" />
</head>

<div id="schedule" data-id="@Model.Id" class="schedule wrapper wrapper--padding">
    <header class="schedule__header">
        <a href="@ViewData["Referer"]" class="btn btn__primary--flat schedule__back">
            <span class="material-symbols-outlined">arrow_back</span>
            <span>Вернуться</span>
        </a>
    </header>
    <main class="schedule__main">
        <div class="card">
            <section class="card__section">
                <h3>Название расписания</h3>
            </section>
            <section class="card__section">
                <input class="input__text" type="text" asp-for="Name" />
                <span class="input__error" asp-validation-for="Name"></span>
            </section>
        </div>
        <div class="card">
            <section class="card__section">
                <h3>Шаблон</h3>
            </section>
            <section class="card__section card__section--row">
                <h6>Порядок смен в шаблоне</h6>
            </section>
            <section class="card__section card__section--row">
                @await Html.PartialAsync("Schedules/_TemplatedShiftsPartial",
                                            new TemplatedShiftsViewModel
                                            {
                                                Shifts = Model.Template?.Shifts ?? [],
                                                PersonalShifts = Model.PersonalShifts,
                                                SharedShifts = Model.SharedShifts
                                            }
                                        )
            </section>
        </div>
        <div class="card">            
            <section class="card__section">
                <h3>Используемые в расписании смены</h3>
            </section>
            <section class="card__section card__section--row">
                @foreach(var shift in Model.PersonalShifts) {
                    <div data-id="@shift.Id" class="card shift">
                        <section class="card__section card__section--row shift__info">
                            <div style="background-color: @shift.ColorCode" class="shift__color"></div>
                            <div class="shift__name">@shift.Name</div>
                        </section>                        
                    </div>
                }
            </section>
            @* <div class="card__divider card__divider--primary"></div>
            <section class="card__section card__section--row">
                <button class="material-symbols-outlined btn btn__primary">save</button>
                <button class="material-symbols-outlined btn btn__accent">close</button>
            </section> *@
        </div>
    </main>
    <footer class="schedule__footer">
       @*  <div class="card">
            <section class="card__section card__section--row">
                <button class="material-symbols-outlined btn btn__primary">save</button>
                <button class="material-symbols-outlined btn btn__accent">close</button>
            </section>
        </div> *@
    </footer>
</div>
